<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright 2007 XBRL International. All Rights Reserved. -->
<?xml-stylesheet type="text/xsl" href="../../../infrastructure/test.xsl"?>
<testcase
  xmlns="http://xbrl.org/2008/conformance"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://xbrl.org/2008/conformance ../../../infrastructure/test.xsd"
  xmlns:xbrlfe="http://xbrl.org/2008/formula/error"
  xmlns:binding="http://xbrl.org/2008/binding/errors"
  xmlns:label="http://xbrl.org/2008/label/error"
  xmlns:reference="http://xbrl.org/2008/reference/error"  
  >
  <creator>
    <name>Herm Fischer</name>
    <email>fischer@markv.com</email>
  </creator>
  <number>12062</number>
  <name>OCC uncovered source dimension rules processing examples</name>
  <description>
    Tests of formula OCC dimension rules processing with uncovered sources
  </description>
  <reference specification="FORMULA" id="sec-occ-rules"/>
  <reference specification="FORMULA" id="sec-dimension-rules"/>
  <reference specification="FORMULA" id="sec-default-aspect-rules"/>

  <variation id="V-01">
    <name>Output of source OCC explicit dimension segment</name>
    <description>Tests that the output OCC segment is that of the input.</description>
    <reference specification="FORMULA" id="sec-occ-rules"/>
    <data>
      <schema>12062-dim-tests.xsd</schema>
      <linkbase>12062-dim-tests-definition.xml</linkbase>
      <linkbase>12062-source-occ-copy-formula.xml</linkbase>
      <instance readMeFirst="true">12062-source-seg-explicit-instance.xml</instance>
    </data>
    <result>
      <instance>12062-source-seg-explicit-result.xml</instance>
    </result>
  </variation>  

  <variation id="V-02">
    <name>Output of source OCC typed dimension segment</name>
    <description>Tests that the output OCC segment is that of the input.</description>
    <reference specification="FORMULA" id="sec-occ-rules"/>
    <data>
      <schema>12062-dim-tests.xsd</schema>
      <linkbase>12062-dim-tests-definition.xml</linkbase>
      <linkbase>12062-source-occ-copy-formula.xml</linkbase>
      <instance readMeFirst="true">12062-source-seg-typed-instance.xml</instance>
    </data>
    <result>
      <instance>12062-source-seg-typed-result.xml</instance>
    </result>
  </variation>  

  <variation id="V-03">
    <name>Output of source OCC explicit dimension scenario</name>
    <description>Tests that the output OCC scenario is that of the input.</description>
    <reference specification="FORMULA" id="sec-occ-rules"/>
    <data>
      <schema>12062-dim-tests.xsd</schema>
      <linkbase>12062-dim-tests-definition.xml</linkbase>
      <linkbase>12062-source-occ-copy-formula.xml</linkbase>
      <instance readMeFirst="true">12062-source-scen-explicit-instance.xml</instance>
    </data>
    <result>
      <instance>12062-source-scen-explicit-result.xml</instance>
    </result>
  </variation>  

  <variation id="V-04">
    <name>Output of source OCC typed dimension scenario</name>
    <description>Tests that the output OCC scenario is that of the input.</description>
    <reference specification="FORMULA" id="sec-occ-rules"/>
    <data>
      <schema>12062-dim-tests.xsd</schema>
      <linkbase>12062-dim-tests-definition.xml</linkbase>
      <linkbase>12062-source-occ-copy-formula.xml</linkbase>
      <instance readMeFirst="true">12062-source-scen-typed-instance.xml</instance>
    </data>
    <result>
      <instance>12062-source-scen-typed-result.xml</instance>
    </result>
  </variation>  

  <variation id="V-05">
    <name>Assembling dimensions from various variable uncovered aspects</name>
    <description>Tests that the output OCC segment assembles dimension from three separate input fact items, showing that specific aspects can be taken from uncovered aspects of bound variables.  
All variables have same dimensions but uncover aspects for the result only as follows:
v1 uncovers typed dim, v2 uncovers expl dim2 and entity identifier, and v3 uncovers expl dim1 and period.
</description>
    <reference specification="FORMULA" id="sec-occ-rules"/>
    <data>
      <schema>12062-dim-tests.xsd</schema>
      <linkbase>12062-dim-tests-definition.xml</linkbase>
      <linkbase>12062-assemble-seg-dims-formula.xml</linkbase>
      <instance readMeFirst="true">12062-assemble-seg-dims-instance.xml</instance>
    </data>
    <result>
      <instance>12062-assemble-seg-dims-result.xml</instance>
    </result>
  </variation>  

  <variation id="V-06">
    <name>Assembling dimensions from various uncovered aspects and occ rules</name>
    <description>Same as v-05 but tests that the output OCC segment assembles dimension from three separate input fact items, where the explicit dimensions (of V-05) are added by OCC rules because they aren't in the original source instance document.  Test assures that formula processor adds output dimensions by rules when not in input sources when using formula:uncovered.
</description>
    <reference specification="FORMULA" id="sec-occ-rules"/>
    <data>
      <schema>12062-dim-tests.xsd</schema>
      <linkbase>12062-dim-tests-definition.xml</linkbase>
      <linkbase>12062-assemble-with-rules-seg-dims-formula.xml</linkbase>
      <instance readMeFirst="true">12062-assemble-with-rules-seg-dims-instance.xml</instance>
    </data>
    <result>
      <instance>12062-assemble-seg-dims-result.xml</instance>
    </result>
  </variation>  

  <variation id="V-07">
    <name>Assembling dimensions from various variable uncovered aspects</name>
    <description>Same as v-05, but the explicit dimension is covered by the three variables,
      and so, it is not in the output fact. The set of aspects of the uncovered
      source is a subset of the set of aspects of input facts.
    </description>
    <reference specification="FORMULA" id="sec-occ-rules"/>
    <data>
      <schema>12062-dim-tests.xsd</schema>
      <linkbase>12062-dim-tests-definition.xml</linkbase>
      <linkbase>12062-assemble-part-seg-dims-formula.xml</linkbase>
      <instance readMeFirst="true">12062-assemble-part-seg-dims-instance.xml</instance>
    </data>
    <result>
      <instance>12062-assemble-part-seg-dims-result.xml</instance>
    </result>
  </variation>  

  <variation id="V-08">
    <name>Assembling dimensions from various variable uncovered aspects</name>
    <description>Same as v-05, but the output value for ExplDim1 has a rule that
      overrides the value of the SAV.
    </description>
    <reference specification="FORMULA" id="sec-occ-rules"/>
    <data>
      <schema>12062-dim-tests.xsd</schema>
      <linkbase>12062-dim-tests-definition.xml</linkbase>
      <linkbase>12062-assemble-over-seg-dims-formula.xml</linkbase>
      <instance readMeFirst="true">12062-assemble-over-seg-dims-instance.xml</instance>
    </data>
    <result>
      <instance>12062-assemble-over-seg-dims-result.xml</instance>
    </result>
  </variation>  

  <variation id="V-09">
    <name>Assembling dimensions from various variable uncovered aspects</name>
    <description>Same as v-05, but the formula has a rule to omit the value 
      for ExplDim1.
    </description>
    <reference specification="FORMULA" id="sec-occ-rules"/>
    <data>
      <schema>12062-dim-tests.xsd</schema>
      <linkbase>12062-dim-tests-definition.xml</linkbase>
      <linkbase>12062-assemble-omit-seg-dims-formula.xml</linkbase>
      <instance readMeFirst="true">12062-assemble-omit-seg-dims-instance.xml</instance>
    </data>
    <result>
      <instance>12062-assemble-omit-seg-dims-result.xml</instance>
    </result>
  </variation>  
  
  <variation id="V-10">
    <name>Assembling dimensions from various variable uncovered aspects</name>
    <description>Same as v-07, but there is a rule that omits the typed dimension,
      which in any case is not in the source. 
    </description>
    <reference specification="FORMULA" id="sec-occ-rules"/>
    <data>
      <schema>12062-dim-tests.xsd</schema>
      <linkbase>12062-dim-tests-definition.xml</linkbase>
      <linkbase>12062-assemble-part-omit-seg-dims-formula.xml</linkbase>
      <instance readMeFirst="true">12062-assemble-part-omit-seg-dims-instance.xml</instance>
    </data>
    <result>
      <instance>12062-assemble-part-seg-dims-result.xml</instance>
    </result>
  </variation>  

  <variation id="V-11">
    <name>Assembling dimensions from various variable uncovered aspects</name>
    <description>Same as v-05, but input facts have a different aspects: 
      variables 2 and 3 are bound to facts with no typed dimension.
    </description>
    <reference specification="FORMULA" id="sec-occ-rules"/>
    <data>
      <schema>12062-dim-tests.xsd</schema>
      <linkbase>12062-dim-tests-definition.xml</linkbase>
      <linkbase>12062-assemble-diff-seg-dims-formula.xml</linkbase>
      <instance readMeFirst="true">12062-assemble-diff-seg-dims-instance.xml</instance>
    </data>
    <result>
      <instance>12062-assemble-seg-dims-result.xml</instance>
    </result>
  </variation>  
  

</testcase>




